<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>无标题文档</title>
<link rel="stylesheet" href="css/base.css" />
<style>
body{background:#69aa70;}
#btn{width:100px;height:40px;position:absolute;top:30px;left:50%;margin-left:-50px;background:#316439;text-align:center;color:#fff;line-height:40px;cursor:pointer;}
#btn:hover{box-shadow:0px 0px 15px #fff;}
.wrap{width:700px; height:400px; margin:100px auto; background:url(img/book0.jpg) no-repeat; position:relative; top:0; left:0;}
#page{width:350px; height:400px; position:absolute; left:50%; top:0; background:#ccc; -webkit-transform-style:preserve-3d; -webkit-transform:perspective(800px) rotateY(0deg); -webkit-transition:1s all ease; -webkit-transform-origin:left center; z-index:3;}
.wrap  .front{width:350px; height:400px; position:absolute; top:0; left:0; background:url(img/book0.jpg) no-repeat -350px 0; -webkit-transform:translateZ(1px);}
.wrap  .back{width:350px; height:400px; position:absolute; top:0; left:0; background:url(img/book1.jpg) no-repeat; -webkit-transform:translateZ(-1px) scale(-1,1);}
.wrap .shadow{width:350px; height:400px;position:absolute; top:0; left:50%;  background:#000;z-index:2;opacity:1; -webkit-transition:1s all ease;}
.wrap #page2{position:absolute; top:0; left:50%; width:350px; height:400px; background:url(img/book1.jpg) no-repeat -350px 0; z-index:1;}
</style>
<script>
window.onload = function(){
	var oBtn = document.querySelector('#btn');
	var oWrap=document.querySelector('.wrap');	
	var oPage=document.querySelector('#page');
	var oShadow = document.querySelector('.shadow');
	var oPage2=document.querySelector('#page2');
	var oFront=document.querySelector('#page .front');
	var oBack=document.querySelector('#page .back');
	var iNow=0;
	var bReady=true;
	oBtn.onclick = function(){
		if(bReady==false)return;
		bReady=false;
		iNow++;
		oPage.style.transition='1s all ease';
		oPage.style.transform='perspective(800px) rotateY(-180deg)';
		oShadow.style.opacity = 0;
		oPage.addEventListener('transitionend',function(){
			bReady=true;
			oPage.style.transition='none';
			oPage.style.transform='perspective(800px) rotateY(0deg)';
			oShadow.style.opacity = 1;
			oWrap.style.backgroundImage='url(img/book'+iNow%5+'.jpg)';
			oFront.style.backgroundImage='url(img/book'+iNow%5+'.jpg)';
			oBack.style.backgroundImage='url(img/book'+(iNow+1)%5+'.jpg)';
			oPage2.style.backgroundImage='url(img/book'+(iNow+1)%5+'.jpg)';
		},false);
	};	
};
</script>
</head>
<body>
<div id="btn">下一页</div>
<div class="wrap">
	<div id="page">
    	<div class="front"></div>
        <div class="back"></div>
    </div>
    <div class="shadow"></div>
    <div id="page2"></div>
</div>
</body>
</html>
